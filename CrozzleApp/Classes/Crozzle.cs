using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;

namespace CrozzleApp.Classes
{
    class Crozzle
    {
        // Configuraton file.
        private string configFile;

        // Word list file.
        private string wordListFile;

        Configuration configuration;

        Words wordList;

        Grid grid;

        /* 
         * Crozzle Size.
         * The number of rows and columns.
         * It must be generated by Grid.
        */
        private int rows;
        private int columns;

        public int Rows { get => rows; private set => rows = CheckNumber(value); }
        public int Columns { get => columns; private set => columns = CheckNumber(value); }

        //OpenFileDialog pass TXT as a parameter in Crozzle class

        public Crozzle(string file)
        {            
            ReadFile(file);


            configuration = new Configuration(configFile);
            wordList = new Words(wordListFile);
            grid = new Grid(rows, columns);
        }

        private int CheckNumber(int value)
        {
            if ((value.GetType() == typeof(int)) && (value > 0))
            {
                return value;
            }
            else
            {
                return -1;
            }
        }

        #region CROZZLE METHODS
        //TODO ReadFile here, use system IO
        private void ReadFile(string file)
        {
            try
            {
                using (StreamReader sr = new StreamReader(file))
                {
                    string line;
                    while ((line = sr.ReadLine()) != null)
                    {
                        if (string.IsNullOrEmpty(line))
                        {
                            continue;
                        } else
                        {
                            System.Diagnostics.Debug.WriteLine(line);
                        }
                        
                    }
                    
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }


            //ValidateFile();
        }

        //TODO Validate itens
        private void ValidateFile()
        {

        }

        private void ValidadeCrozzle()
        {

        }
        #endregion
    }
}
